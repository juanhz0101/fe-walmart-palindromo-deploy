(this["webpackJsonpPalindromo-App"]=this["webpackJsonpPalindromo-App"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(7),i=n.n(c),a=n(3),s=n(2),o=n(4),u=n.n(o),d=n(6),j=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,c,i,a,s,o,d,j,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l(t),r="https://be-walmart-palindromo-deploy-xudt4.ondigitalocean.app/products?".concat(n),e.next=4,fetch(r,{mode:"cors",headers:{"Access-Control-Allow-Origin":"*"}});case 4:return c=e.sent,e.next=7,c.json();case 7:return i=e.sent,a=i.resources,s=i.pagination,o=a.map((function(e){var t=e.id,n=e.brand,r=e.description,c=e.image,i=e.price;return{id:t,brand:n,description:r,image:"https://".concat(c),price:i}})),d=b(r),j=d.page,p=d.limit,s.page=j,s.limit=p,e.abrupt("return",{products:o,paginationInfo:s});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,c,i,a,s,o,d,j,p,O;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l(n),c="https://be-walmart-palindromo-deploy-xudt4.ondigitalocean.app/products/search?query=".concat(encodeURI(t),"&").concat(r),e.next=4,fetch(c,{mode:"cors",headers:{"Access-Control-Allow-Origin":"*"}});case 4:return i=e.sent,e.next=7,i.json();case 7:return a=e.sent,s=a.resources,o=a.pagination,d=s.map((function(e){var t=e.id,n=e.brand,r=e.description,c=e.image,i=e.price,a=e.priceWithDiscount,s=e.discount;return{id:t,brand:n,description:r,image:"https://".concat(c),price:i,priceWithDiscount:a,discount:s}})),j=b(c),p=j.page,O=j.limit,o.page=p,o.limit=O,e.abrupt("return",{products:d,paginationInfo:o});case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(e){return e.split("?")[1]},b=function(e){var t=new URL(e),n=new URLSearchParams(t.search);return{page:n.get("page"),limit:n.get("limit")}},O=n(0);var f=function(e){var t=e.id,n=e.brand,r=e.description,c=e.image,i=e.price,a=e.priceWithDiscount,s=e.discount,o=function(e){return new Intl.NumberFormat("es-ES").format(parseFloat(e))};return Object(O.jsxs)("div",{className:"card animate__animated animate__fadeIn",children:[Object(O.jsxs)("p",{children:["Identificador: ",t]}),Object(O.jsx)("img",{src:c,alt:n}),s&&Object(O.jsxs)("p",{className:"discount",children:["Descuento %",s," \ud83d\udca5 "]}),a?Object(O.jsxs)("p",{children:[" ",Object(O.jsx)("b",{children:"Precio normal"})," ",Object(O.jsx)("br",{}),Object(O.jsxs)("del",{children:["$",o(i)]})]}):Object(O.jsxs)("p",{children:[" ",Object(O.jsx)("b",{children:"Precio"})," ",Object(O.jsx)("br",{})," $",o(i)]}),a&&Object(O.jsxs)("p",{children:[" ",Object(O.jsx)("b",{children:"Precio x Hoy"})," ",Object(O.jsx)("br",{})," $",o(a)," \ud83d\ude31"]}),Object(O.jsxs)("p",{className:"brand",children:[Object(O.jsx)("b",{children:"Marca"})," ",Object(O.jsx)("br",{})," ",n]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("b",{children:"Descripci\xf3n"})," ",Object(O.jsx)("br",{}),r]})]})};var h=function(e){var t=e.query,n=e.setQuery,c=function(e){var t=e.query,n=void 0===t?"":t,c=e.pagination,i=void 0===c?"/products?page=1&limit=20":c,s=Object(r.useState)({data:[],loading:!0,paginationInfo:{}}),o=Object(a.a)(s,2),u=o[0],d=o[1];return Object(r.useEffect)((function(){""===n?j(i).then((function(e){var t=e.products,n=e.paginationInfo;d({data:t,loading:!1,paginationInfo:n})})):p(n,i).then((function(e){var t=e.products,n=e.paginationInfo;d({data:t,loading:!1,paginationInfo:n})}))}),[n,i]),u}(t),i=c.data,o=c.loading,u=c.paginationInfo;return Object(O.jsxs)(O.Fragment,{children:[o&&Object(O.jsx)("p",{className:"animate__animated animate__flash",children:"Loading"}),Object(O.jsx)("div",{className:"card-grid",children:i.map((function(e){return Object(O.jsx)(f,Object(s.a)({},e),e.id)}))}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:["Total registros: ",u.totalResources]}),Object(O.jsxs)("p",{children:["Total registros por pagina: ",u.limit]}),Object(O.jsxs)("p",{children:["Total paginas: ",u.totalPages]}),Object(O.jsxs)("p",{children:["Pagina actual: ",u.page]}),Object(O.jsx)("br",{}),Object(O.jsxs)("p",{children:[Object(O.jsx)("button",{disabled:null===u.previous,onClick:function(e){return n((function(e){return Object(s.a)(Object(s.a)({},e),{},{pagination:u.previous})}))},children:"Previa"}),Object(O.jsx)("button",{disabled:null===u.next,onClick:function(e){return n((function(e){return Object(s.a)(Object(s.a)({},e),{},{pagination:u.next})}))},children:"Siguiente"}),Object(O.jsx)("button",{disabled:null===u.first,onClick:function(e){return n((function(e){return Object(s.a)(Object(s.a)({},e),{},{pagination:u.first})}))},children:"Primera"}),Object(O.jsx)("button",{disabled:null===u.last,onClick:function(e){return n((function(e){return Object(s.a)(Object(s.a)({},e),{},{pagination:u.last})}))},children:"Ultima"})]})]})]})};var g=function(e){var t=e.setQuery,n=Object(r.useState)(""),c=Object(a.a)(n,2),i=c[0],o=c[1];return Object(r.useEffect)((function(){o(i)," "===i?o(""):t((function(e){return Object(s.a)(Object(s.a)({},e),{},{query:i})}))}),[i,t]),Object(O.jsx)("form",{children:Object(O.jsx)("input",{type:"text",value:i,onChange:function(e){return o(e.target.value)},placeholder:"Por favor ingrese un Nombre o ID de producto"})})};var x=function(e){var t=e.defaultQuery,n=void 0===t?{query:"",pagination:"/products?page=1&limit=20"}:t,c=Object(r.useState)(n),i=Object(a.a)(c,2),s=i[0],o=i[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"Lider Palindromo \ud83c\udf1f"}),Object(O.jsx)("hr",{}),Object(O.jsx)(g,{setQuery:o}),Object(O.jsx)("hr",{}),Object(O.jsx)(h,{query:s,setQuery:o})]})};n(14);i.a.render(Object(O.jsx)(x,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.491814ce.chunk.js.map