(this["webpackJsonpPalindromo-App"]=this["webpackJsonpPalindromo-App"]||[]).push([[0],{14:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n(7),i=n.n(a),c=n(3),o=n(2),s=n(4),u=n.n(s),d=n(6),p=function(){var t=Object(d.a)(u.a.mark((function t(e){var n,r,a,i,c,o,s,d,p,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=j(e),r="https://be-walmart-palindromo-deploy-xudt4.ondigitalocean.app/products?".concat(n),t.next=4,fetch(r,{mode:"cors",headers:{"Access-Control-Allow-Origin":"*"}});case 4:return a=t.sent,t.next=7,a.json();case 7:return i=t.sent,c=i.resources,o=i.pagination,s=c.map((function(t){var e=t.id,n=t.brand,r=t.description,a=t.image,i=t.price;return{id:e,brand:n,description:r,image:"https://".concat(a),price:i}})),d=b(r),p=d.page,l=d.limit,o.page=p,o.limit=l,t.abrupt("return",{products:s,paginationInfo:o});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(d.a)(u.a.mark((function t(e,n){var r,a,i,c,o,s,d,p,l,f;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=j(n),a="https://be-walmart-palindromo-deploy-xudt4.ondigitalocean.app/products/search?query=".concat(encodeURI(e),"&").concat(r),t.next=4,fetch(a,{mode:"cors",headers:{"Access-Control-Allow-Origin":"*"}});case 4:return i=t.sent,t.next=7,i.json();case 7:return c=t.sent,o=c.resources,s=c.pagination,d=o.map((function(t){var e=t.id,n=t.brand,r=t.description,a=t.image,i=t.price,c=t.priceWithDiscount,o=t.discount;return{id:e,brand:n,description:r,image:"https://".concat(a),price:i,priceWithDiscount:c,discount:o}})),p=b(a),l=p.page,f=p.limit,s.page=l,s.limit=f,t.abrupt("return",{products:d,paginationInfo:s});case 15:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),j=function(t){return t.split("?")[1]},b=function(t){var e=new URL(t),n=new URLSearchParams(e.search);return{page:n.get("page"),limit:n.get("limit")}},f=n(0);var g=function(t){var e=t.id,n=t.brand,r=t.description,a=t.image,i=t.price,c=t.priceWithDiscount,o=t.discount;return Object(f.jsxs)("div",{className:"card animate__animated animate__fadeIn",children:[Object(f.jsx)("img",{src:a,alt:n}),Object(f.jsxs)("p",{children:["ID ",e]}),Object(f.jsxs)("p",{className:"brand",children:["Marca: ",n]}),Object(f.jsxs)("p",{children:["Descripcion: ",r]}),Object(f.jsxs)("p",{children:["Precio original: ",i]}),c&&Object(f.jsxs)("p",{children:["Precio con descuento: ",c," "]}),o&&Object(f.jsxs)("p",{children:["Precio con descuento: ",o," "]})]})};var O=function(t){var e=t.query,n=t.setQuery,a=function(t){var e=t.query,n=void 0===e?"":e,a=t.pagination,i=void 0===a?"/products?page=1&limit=20":a,o=Object(r.useState)({data:[],loading:!0,paginationInfo:{}}),s=Object(c.a)(o,2),u=s[0],d=s[1];return Object(r.useEffect)((function(){""===n?p(i).then((function(t){var e=t.products,n=t.paginationInfo;d({data:e,loading:!1,paginationInfo:n})})):l(n,i).then((function(t){var e=t.products,n=t.paginationInfo;d({data:e,loading:!1,paginationInfo:n})}))}),[n,i]),u}(e),i=a.data,s=a.loading,u=a.paginationInfo;return Object(f.jsxs)(f.Fragment,{children:[s&&Object(f.jsx)("p",{className:"animate__animated animate__flash",children:"Loading"}),Object(f.jsx)("div",{className:"card-grid",children:i.map((function(t){return Object(f.jsx)(g,Object(o.a)({},t),t.id)}))}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:["Total registros: ",u.totalResources]}),Object(f.jsxs)("p",{children:["Total registros por pagina: ",u.limit]}),Object(f.jsxs)("p",{children:["Total paginas: ",u.totalPages]}),Object(f.jsxs)("p",{children:["Pagina actual: ",u.page]}),Object(f.jsx)("br",{}),Object(f.jsxs)("p",{children:[Object(f.jsx)("button",{disabled:null===u.previous,onClick:function(t){return n((function(t){return Object(o.a)(Object(o.a)({},t),{},{pagination:u.previous})}))},children:"Previa"}),Object(f.jsx)("button",{disabled:null===u.next,onClick:function(t){return n((function(t){return Object(o.a)(Object(o.a)({},t),{},{pagination:u.next})}))},children:"Siguiente"}),Object(f.jsx)("button",{disabled:null===u.first,onClick:function(t){return n((function(t){return Object(o.a)(Object(o.a)({},t),{},{pagination:u.first})}))},children:"Primera"}),Object(f.jsx)("button",{disabled:null===u.last,onClick:function(t){return n((function(t){return Object(o.a)(Object(o.a)({},t),{},{pagination:u.last})}))},children:"Ultima"})]})]})]})};var h=function(t){var e=t.setQuery,n=Object(r.useState)(""),a=Object(c.a)(n,2),i=a[0],s=a[1];return Object(r.useEffect)((function(){s(i)," "===i?s(""):e((function(t){return Object(o.a)(Object(o.a)({},t),{},{query:i})}))}),[i,e]),Object(f.jsx)("form",{children:Object(f.jsx)("input",{type:"text",value:i,onChange:function(t){return s(t.target.value)},placeholder:"Por favor ingrese un Nombre o ID de producto"})})};var m=function(t){var e=t.defaultQuery,n=void 0===e?{query:"",pagination:"/products?page=1&limit=20"}:e,a=Object(r.useState)(n),i=Object(c.a)(a,2),o=i[0],s=i[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h2",{children:"Lider Palindromo"}),Object(f.jsx)("hr",{}),Object(f.jsx)(h,{setQuery:s}),Object(f.jsx)(O,{query:o,setQuery:s})]})};n(14);i.a.render(Object(f.jsx)(m,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.86cc13ef.chunk.js.map